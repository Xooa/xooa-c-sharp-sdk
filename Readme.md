# Xooa C# SDK

The official Xooa SDK for C# to connect with the Xooa Paas.

Xooa (pronounced ZUU-ah) is dedicated to making blockchain easy. Focus on business problems, not blockchain problems.

This SDK refers to APIs available for Xooa platform. For more details, refer: <https://api.xooa.com/explorer>

The platform documentation is available at <https://docs.xooa.com>

    
## Usage
---
### [XooaClient](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/XooaClient.cs)
```csharp
    using XooaSDK.Client.XooaClient
```
*This is the base class of Xooa C# SDK.*
This class contains all the methods made available by the SDK. 

## Summary
-------

### Properties

##### API Token
The API Token for the app provided on Xooa Platform when you deploy an app there. You can also regenerate a new API Token for an Identity by going to Identities tab in the app and clicking on Actions -> Regenerate API Token.
```csharp
    private string apiToken;
```

##### App URL
The App URL where the app is deployed. It is default to [Xooa](https://api.xooa.com/api/v1). You can change it if you want to test your app in a local environment.
```csharp
    private string appUrl;
```

##### Timeout
Timeout interval to wait for before switching to async mode.
```csharp
    private int timeout;
```

##### WebSocket
Internal [WebSocket](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/util/ClientWebSocket.cs) instance used to connect to Xooa events generated by the smart contract.
```csharp
   private WebSocket webSocket; 
```

##### RestClient
Internal RestClient instnace used to invoke xooa api.
```csharp
    private RestClient restClient;
```


### Constructors

##### XooaClient()

```csharp
    public XooaClient()
```
Default Constructor of [XooaClient](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/XooaClient.cs).


##### XooaClient(string apiToken, string appUrl)

```csharp
      public XooaClient(string apiToken, string appUrl = "https://api.xooa.com/api/v1")
```
Constructor to create a [XooaClient](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/XooaClient.cs) object with the given API Token and App Url. It sets the default value for app url to [Xooa](https://api.xooa.com/api/v1).


### Methods

##### validate()

```csharp
    public IdentityResponse validate()
```
Method to Validate if the given API Token is valid or not.

Return - IdentityResponse
Instance of [IdentityResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/IdentityResponse.cs) giving details about the identity.

Throws -
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs)
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) giving the error code and error message.


##### subscribeEvents(Action<object> callback)
```csharp
    public void subscribeEvents(Action<object> callback)
```
Method to subscribe to events generated in the smart contract. This method requires a callback method which decides what to do when an event is received.



##### unsubscribe()

```csharp
    public void unsubscribe()
```
Method to unsubscribe the events from the smart contract.


##### invoke(string functionName, string[] args, string timeout)
```csharp
    public InvokeResponse invoke(string functionName, string[] args = null, string timeout = "3000")
```
Method to Invoke blockchain to submit transactions. For more details refer [Xooa Invoke API](https://api.xooa.com/explorer/#!/Smart_Contract/Invoke).

Return - InvokeResponse
Instance of [InvokeResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/InvokeResponse.cs) giving Transaction Id and Payload returned by the smart contract.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.


##### invokeAsync(string functionName, string[] args)
```csharp
    public PendingTransactionResponse invokeAsync(string functionName, string[] args = null)
```
Method to Invoke blockchain in async mode to submit transactions. For more details refer [Xooa Invoke API](https://api.xooa.com/explorer/#!/Smart_Contract/Invoke).

Return - PendingTransactionResponse
Instance of [PendingTransactionResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/PendingTransactionResponse.cs) giving result id and result url for pending transaction.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.



##### query(string functionName, string args, string timeout)
```csharp
    public QueryResponse query(string functionName, string args = null, string timeout = "3000")
```
Method to Query blockchain to fetch state for arguments. For more details refer [Xooa Query API](https://api.xooa.com/explorer/#!/Smart_Contract/Query).

Return - QueryResponse
Instance of [QueryResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/QueryResponse.cs) giving payload returned by the smart contract.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.


##### queryAsync(string functionName, string args)
```csharp
    public PendingTransactionResponse queryAsync(string functionName, string args = null)
```
Method to Query blockchain in async mode to fetch state for arguments. For more details refer [Xooa Query API](https://api.xooa.com/explorer/#!/Smart_Contract/Query).

Return - PendingTransactionResponse
Instance of [PendingTransactionResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/PendingTransactionResponse.cs) giving result id and result url for pending transaction.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.



##### currentIdentity(string timeout)
```csharp
    public IdentityResponse currentIdentity(string timeout = "3000")
```
Method to get the authenticating identity details. For more details refer [Authenticated Identity](https://api.xooa.com/explorer/#!/Identities/Authenticated_Identity).

Return - IdentityResponse
Instance of [IdentityResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/IdentityResponse.cs) giving details about the identity.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.


##### getIdentities(string timeout)
```csharp
    public List<IdentityResponse> getIdentities(string timeout = "3000")
```
Method to get a list of all the identities associated with the app. For more details refer [Get All Identitites](https://api.xooa.com/explorer/#!/Identities/Identities_getAllIdentities).

Return - List<IdentityResponse>
List containing all the instances of [IdentityResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/IdentityResponse.cs).

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.


##### enrollIdentity(IdentityRequest identityRequest, string timeout)
```csharp
    public IdentityResponse enrollIdentity(IdentityRequest identityRequest, string timeout = "3000")
```
Method to enroll a new identity for the app. For more details refer [Enroll Identity](https://api.xooa.com/explorer/#!/Identities/Enrollment).

Return - IdentityResponse
Instance of [IdentityResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/IdentityResponse.cs) giving details about the new identity.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.


##### enrollIdentityAsync(IdentityRequest identityRequest)
```csharp
    public PendingTransactionResponse enrollIdentityAsync(IdentityRequest identityRequest)
```
Method to enroll a new identity for the app in async mode. For more details refer [Enroll Identity](https://api.xooa.com/explorer/#!/Identities/Enrollment).

Return - PendingTransactionResponse
Instance of [PendingTransactionResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/PendingTransactionResponse.cs) giving result id and result url for pending transaction.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.


#####  regenerateIdentityApiToken(string identityId, string timeout)
```csharp
     public IdentityResponse regenerateIdentityApiToken(string identityId, string timeout = "3000")
```
Method to regenerate a new API Token for the given identity id. For more details refer [Regenerate Token](https://api.xooa.com/explorer/#!/Identities/Regenerate_Token).

Return - IdentityResponse
Instance of [IdentityResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/IdentityResponse.cs) giving details about the new identity.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.


##### getIdentity(string identityId, string timeout)
```csharp
    public IdentityResponse getIdentity(string identityId, string timeout = "3000")
```
Method to get Identity details for the given identity id. For more details refer [Identity Information](https://api.xooa.com/explorer/#!/Identities/Get_identity).

Return - IdentityResponse
Instance of [IdentityResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/IdentityResponse.cs) giving details about the new identity.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.


##### deleteIdentity(string identityId, string timeout)
```csharp
    public string deleteIdentity(string identityId, string timeout = "3000")
```
Method to delete the identity from the app for the given identity id. For more details refer [Delete Identity](https://api.xooa.com/explorer/#!/Identities/Delete_Identity).

Return - Boolean
True if identity was deleted false otherwise.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.



##### getCurrentBlock(string timeout)
```csharp
    public CurrentBlockResponse getCurrentBlock(string timeout = "3000")
```
Method to get the block number and hashes of current (highest) block. For more details refer [Get Current Block](https://api.xooa.com/explorer/#!/Ledger/BlockHeight).

Return - CurrentBlockResponse
Instance of [CurrentBlockResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/CurrentBlockResponse.cs) giving the block number and hashes of current block.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.


##### getCurrentBlockAsync()
```csharp
    public PendingTransactionResponse getCurrentBlockAsync()
```
Method to get the block number and hashes of current (highest) block in async mode. For more details refer [Get Current Block](https://api.xooa.com/explorer/#!/Ledger/BlockHeight).

Return - PendingTransactionResponse
Instance of [PendingTransactionResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/PendingTransactionResponse.cs) giving result id and result url for pending transaction.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.


##### getBlockByNumber(string blockNumber, string timeout)
```csharp
    public BlockResponse getBlockByNumber(string blockNumber, string timeout = "3000")
```
Method to get the block number and hashes of the block number. For more details refer [Get Block](https://api.xooa.com/explorer/#!/Ledger/BlockData).

Return - BlockResponse
Instance of [BlockResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/BlockResponse.cs) giving the block number and hashes of the block.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.


##### getBlockByNumberAsync(string blockNumber)
```csharp
    public PendingTransactionResponse getBlockByNumberAsync(string blockNumber)
```
Method to get the block number and hashes of the block number in async mode. For more details refer [Get Block](https://api.xooa.com/explorer/#!/Ledger/BlockData).

Return - PendingTransactionResponse
Instance of [PendingTransactionResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/PendingTransactionResponse.cs) giving result id and result url for pending transaction.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.


##### getTransactionByTransactionId(string transactionId, string timeout)
```csharp
    public TransactionResponse getTransactionByTransactionId(string transactionId, string timeout = "3000")
```
Method to get the transaction details for the transaction id. For more details refer [Get Transaction By TransactionId](https://api.xooa.com/explorer/#!/Ledger/BlockData_0).

Return - TransactionResponse
Instance of [TransactionResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/TransactionResponse.cs) giving the details about the transaction.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.


##### getTransactionByTransactionIdAsync(string transactionId)
```csharp
    public PendingTransactionResponse getTransactionByTransactionIdAsync(string transactionId)
```
Method to get the transaction details for the transaction id in async mode. For more details refer [Get Transaction By TransactionId](https://api.xooa.com/explorer/#!/Ledger/BlockData_0).

Return - PendingTransactionResponse
Instance of [PendingTransactionResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/PendingTransactionResponse.cs) giving result id and result url for pending transaction.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.



##### getResultForInvoke(string resultId, string timeout)
```csharp
    public InvokeResponse getResultForInvoke(string resultId, string timeout = "3000") 
```
Method to get Invoke Response for a request in pending state. For more detials refer [Result API](https://api.xooa.com/explorer/#!/Result/Result).

Return - InvokeResponse
Instance of [InvokeResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/InvokeResponse.cs) giving the transaction id and payload.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.


##### getResultForQuery(string resultId, string timeout)
```csharp
    public QueryResponse getResultForQuery(string resultId, string timeout = "3000")
```
Method to get Query Response for a request in pending state. For more detials refer [Result API](https://api.xooa.com/explorer/#!/Result/Result).

Return - QueryResponse
Instance of [QueryResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/QueryResponse.cs) giving the payload.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.


##### getResultForIdentity(string resultId, string timeout)
```csharp
    public IdentityResponse getResultForIdentity(string resultId, string timeout = "3000")
```
Method to get Identity Response for a request in pending state. For more detials refer [Result API](https://api.xooa.com/explorer/#!/Result/Result).

Return - IdentityResponse
Instance of [IdentityResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/IdentityResponse.cs) giving the details related to the identity.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.


##### getResultForCurrentBlock(string resultId, string timeout)
```csharp
    public CurrentBlockResponse getResultForCurrentBlock(string resultId, string timeout = "3000")
```
Method to get CurrentBlockResponse for a request in pending state. For more detials refer [Result API](https://api.xooa.com/explorer/#!/Result/Result).

Return - CurrentBlockResponse
Instance of [CurrentBlockResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/CurrentBlockResponse.cs) giving the block number and hashes for the current block.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.


##### getResultForBlockByNumber(string resultId, string timeout)
```csharp
    public BlockResponse getResultForBlockByNumber(string resultId, string timeout = "3000") 
```
Method to get BlockResponse for a request in pending state. For more detials refer [Result API](https://api.xooa.com/explorer/#!/Result/Result).

Return - BlockResponse
Instance of [BlockResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/BlockResponse.cs) giving the block number and hashes for the block.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.


##### getResultForTransaction(string resultId, string timeout)
```csharp
    public TransactionResponse getResultForTransaction(string resultId, string timeout = "3000")
```
Method to get TransactionResponse for a request in pending state. For more detials refer [Result API](https://api.xooa.com/explorer/#!/Result/Result).

Return - TransactionResponse
Instance of [TransactionResponse](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/response/TransactionResponse.cs) giving the transaction details for the transaction id.

Throws - 
[XooaApiException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaApiException.cs) - Instance of XooaApiException giving the error code and error message.
[XooaRequestTimeoutException](https://github.com/Xooa/xooa-c-sharp-sdk/blob/master/src/exceptions/XooaRequestTimeoutException.cs) - Instance of XooaRequestTimeoutException giving result id and result url for pending transaction.
